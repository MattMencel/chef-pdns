---
driver_plugin: vagrant
driver_config:
  require_chef_omnibus: 11.16.4

platforms:
- name: ubuntu-14.04
- name: ubuntu-12.04

suites:
- name: recursor
  run_list:
    - recipe[pdns::recursor]
  attributes: {}
- name: authoritative
  run_list:
    - recipe[pdns::authoritative]
  attributes: {}
- name: authoritative_source
  run_list:
    - recipe[pdns::authoritative]
  attributes:
    pdns:
      build_method: source
- name: backend_pgsql
  run_list:
    - recipe[postgresql]
    - recipe[pdns::authoritative]
    - recipe[pdns::backend_pgsql]
    - recipe[pdns::authoritative_config]
  attributes:
    pdns:
      authoritative:
        package:
          backends:
          - gpgsql
